{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport FormTag from './forms/FormTag.vue';\nimport TextInput from './forms/TextInput.vue';\nimport { store } from './store.js';\nimport router from \"@/router\";\nimport notie from \"notie/dist/notie\";\nexport default {\n  // eslint-disable-next-line\n  name: 'login',\n  components: {\n    FormTag,\n    TextInput\n  },\n  data() {\n    return {\n      email: \"\",\n      password: \"\",\n      store\n    };\n  },\n  methods: {\n    submitHandler() {\n      console.log(\"submitHandler called - success!\");\n      const payload = {\n        email: this.email,\n        password: this.password\n      };\n      const requestOptions = {\n        method: \"POST\",\n        body: JSON.stringify(payload)\n      };\n      fetch(\"http://localhost:8081/users/login\", requestOptions).then(response => response.json()).then(response => {\n        if (response.error) {\n          console.log(\"Error:\", response.message);\n          notie.alert({\n            type: 'error',\n            text: response.message\n            // stay: true,\n            // position: 'bottom',\n          });\n        } else {\n          console.log(\"Token:\", response.data.token.token);\n          store.token = response.data.token.token;\n          store.user = {\n            id: response.data.user.id,\n            first_name: response.data.user.first_name,\n            last_name: response.data.user.last_name,\n            email: response.data.user.email\n          };\n\n          // save info to cookie\n          let date = new Date();\n          let expDays = 1;\n          date.setTime(date.getTime() + expDays * 24 * 60 * 60 * 1000);\n          const expires = \"expires=\" + date.toUTCString();\n\n          // set the cookie\n          document.cookie = \"_site_data=\" + JSON.stringify(response.data) + \"; \" + expires + \"; path=/; SameSite=strict; Secure;\";\n          router.push(\"/\");\n        }\n      });\n    }\n  }\n};","map":{"version":3,"names":["FormTag","TextInput","store","router","notie","name","components","data","email","password","methods","submitHandler","console","log","payload","requestOptions","method","body","JSON","stringify","fetch","then","response","json","error","message","alert","type","text","token","user","id","first_name","last_name","date","Date","expDays","setTime","getTime","expires","toUTCString","document","cookie","push"],"sources":["/Users/ed1p_/MovieProject/frontend/src/components/Login.vue"],"sourcesContent":["<template>\n  <div class=\"container\">\n    <div class=\"row\">\n      <div class=\"col\">\n        <h1 class=\"mt-5\">Login</h1>\n        <hr>\n        <form-tag @myevent=\"submitHandler\" name=\"myform\" event=\"myevent\">\n\n          <text-input\n              v-model=\"email\"\n              label=\"Email\"\n              type=\"email\"\n              name=\"email\"\n              required=\"true\">\n          </text-input>\n\n          <text-input\n              v-model=\"password\"\n              label=\"Password\"\n              type=\"password\"\n              name=\"password\"\n              required=\"true\">\n          </text-input>\n\n          <hr>\n          <input type=\"submit\" class=\"btn btn-primary\" value=\"Login\">\n        </form-tag>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport FormTag from './forms/FormTag.vue'\nimport TextInput from './forms/TextInput.vue'\nimport { store } from './store.js'\nimport router from \"@/router\";\nimport notie from \"notie/dist/notie\";\n\nexport default {  // eslint-disable-next-line\n  name: 'login',\n  components: {\n    FormTag,\n    TextInput,\n  },\n  data() {\n    return {\n      email: \"\",\n      password: \"\",\n      store,\n    }\n  },\n  methods: {\n    submitHandler() {\n      console.log(\"submitHandler called - success!\");\n\n      const payload = {\n        email: this.email,\n        password: this.password,\n      }\n\n      const requestOptions = {\n        method: \"POST\",\n        body: JSON.stringify(payload),\n      }\n      fetch(\"http://localhost:8081/users/login\", requestOptions)\n          .then((response) => response.json())\n          .then((response) => {\n            if (response.error) {\n              console.log(\"Error:\", response.message);\n              notie.alert({\n                type: 'error',\n                text: response.message,\n                // stay: true,\n                // position: 'bottom',\n              })\n            } else {\n              console.log(\"Token:\", response.data.token.token);\n              store.token = response.data.token.token;\n\n              store.user = {\n                id: response.data.user.id,\n                first_name: response.data.user.first_name,\n                last_name: response.data.user.last_name,\n                email: response.data.user.email,\n              }\n\n              // save info to cookie\n              let date = new Date();\n              let expDays = 1;\n              date.setTime(date.getTime() + (expDays * 24 * 60 * 60 * 1000));\n              const expires = \"expires=\" + date.toUTCString();\n\n              // set the cookie\n              document.cookie = \"_site_data=\"\n                  + JSON.stringify(response.data)\n                  + \"; \"\n                  + expires\n                  + \"; path=/; SameSite=strict; Secure;\"\n              router.push(\"/\");\n            }\n          })\n    }\n  }\n}\n</script>"],"mappings":";AAiCA,OAAOA,OAAM,MAAO,qBAAoB;AACxC,OAAOC,SAAQ,MAAO,uBAAsB;AAC5C,SAASC,KAAI,QAAS,YAAW;AACjC,OAAOC,MAAK,MAAO,UAAU;AAC7B,OAAOC,KAAI,MAAO,kBAAkB;AAEpC,eAAe;EAAG;EAChBC,IAAI,EAAE,OAAO;EACbC,UAAU,EAAE;IACVN,OAAO;IACPC;EACF,CAAC;EACDM,IAAIA,CAAA,EAAG;IACL,OAAO;MACLC,KAAK,EAAE,EAAE;MACTC,QAAQ,EAAE,EAAE;MACZP;IACF;EACF,CAAC;EACDQ,OAAO,EAAE;IACPC,aAAaA,CAAA,EAAG;MACdC,OAAO,CAACC,GAAG,CAAC,iCAAiC,CAAC;MAE9C,MAAMC,OAAM,GAAI;QACdN,KAAK,EAAE,IAAI,CAACA,KAAK;QACjBC,QAAQ,EAAE,IAAI,CAACA;MACjB;MAEA,MAAMM,cAAa,GAAI;QACrBC,MAAM,EAAE,MAAM;QACdC,IAAI,EAAEC,IAAI,CAACC,SAAS,CAACL,OAAO;MAC9B;MACAM,KAAK,CAAC,mCAAmC,EAAEL,cAAc,EACpDM,IAAI,CAAEC,QAAQ,IAAKA,QAAQ,CAACC,IAAI,CAAC,CAAC,EAClCF,IAAI,CAAEC,QAAQ,IAAK;QAClB,IAAIA,QAAQ,CAACE,KAAK,EAAE;UAClBZ,OAAO,CAACC,GAAG,CAAC,QAAQ,EAAES,QAAQ,CAACG,OAAO,CAAC;UACvCrB,KAAK,CAACsB,KAAK,CAAC;YACVC,IAAI,EAAE,OAAO;YACbC,IAAI,EAAEN,QAAQ,CAACG;YACf;YACA;UACF,CAAC;QACH,OAAO;UACLb,OAAO,CAACC,GAAG,CAAC,QAAQ,EAAES,QAAQ,CAACf,IAAI,CAACsB,KAAK,CAACA,KAAK,CAAC;UAChD3B,KAAK,CAAC2B,KAAI,GAAIP,QAAQ,CAACf,IAAI,CAACsB,KAAK,CAACA,KAAK;UAEvC3B,KAAK,CAAC4B,IAAG,GAAI;YACXC,EAAE,EAAET,QAAQ,CAACf,IAAI,CAACuB,IAAI,CAACC,EAAE;YACzBC,UAAU,EAAEV,QAAQ,CAACf,IAAI,CAACuB,IAAI,CAACE,UAAU;YACzCC,SAAS,EAAEX,QAAQ,CAACf,IAAI,CAACuB,IAAI,CAACG,SAAS;YACvCzB,KAAK,EAAEc,QAAQ,CAACf,IAAI,CAACuB,IAAI,CAACtB;UAC5B;;UAEA;UACA,IAAI0B,IAAG,GAAI,IAAIC,IAAI,CAAC,CAAC;UACrB,IAAIC,OAAM,GAAI,CAAC;UACfF,IAAI,CAACG,OAAO,CAACH,IAAI,CAACI,OAAO,CAAC,IAAKF,OAAM,GAAI,EAAC,GAAI,EAAC,GAAI,EAAC,GAAI,IAAK,CAAC;UAC9D,MAAMG,OAAM,GAAI,UAAS,GAAIL,IAAI,CAACM,WAAW,CAAC,CAAC;;UAE/C;UACAC,QAAQ,CAACC,MAAK,GAAI,aAAY,GACxBxB,IAAI,CAACC,SAAS,CAACG,QAAQ,CAACf,IAAI,IAC5B,IAAG,GACHgC,OAAM,GACN,oCAAmC;UACzCpC,MAAM,CAACwC,IAAI,CAAC,GAAG,CAAC;QAClB;MACF,CAAC;IACP;EACF;AACF","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}