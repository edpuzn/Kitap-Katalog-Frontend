{"ast":null,"code":"import Security from \"@/components/security\";\nimport notie from \"notie/dist/notie\";\nimport { store } from \"@/components/store\";\n\n// eslint-disable-next-line\nexport default {\n  name: 'App',\n  data() {\n    return {\n      users: [],\n      ready: false,\n      store\n    };\n  },\n  beforeMount() {\n    Security.requireToken();\n    fetch(process.env.VUE_APP_API_URL + \"/admin/users\", Security.requestOptions(\"\")).then(response => response.json()).then(response => {\n      if (response.error) {\n        this.$emit('error', response.message);\n      } else {\n        this.users = response.data.users;\n        this.ready = true;\n      }\n    }).catch(error => {\n      this.$emit('error', error);\n    });\n  },\n  methods: {\n    logUserOut(id) {\n      if (id !== store.user.id) {\n        notie.confirm({\n          text: \"Are you sure you want to log this user out?\",\n          submitText: \"Log Out\",\n          submitCallback: function () {\n            console.log(\"Would log out user id\", id);\n          }\n        });\n      } else {\n        this.$emit('error', \"You can't log yourself out!\");\n      }\n    }\n  }\n};","map":{"version":3,"names":["Security","notie","store","name","data","users","ready","beforeMount","requireToken","fetch","process","env","VUE_APP_API_URL","requestOptions","then","response","json","error","$emit","message","catch","methods","logUserOut","id","user","confirm","text","submitText","submitCallback","console","log"],"sources":["/Users/ed1p_/MovieProject/frontend/src/components/Users.vue"],"sourcesContent":["<template>\n  <div class=\"container\">\n    <div class=\"row\">\n      <div class=\"col\">\n        <h1 class=\"mt-3\">All Users</h1>\n      </div>\n      <hr>\n\n      <table v-if=\"this.ready\" class=\"table table-compact table-striped\">\n        <thead>\n        <tr>\n          <th>User</th>\n          <th>Email</th>\n          <th>Active</th>\n          <th>Status</th>\n        </tr>\n        </thead>\n        <tbody>\n        <tr v-for=\"u in this.users\" v-bind:key=\"u.id\">\n          <td>\n            <router-link :to=\"`/admin/users/${u.id}`\">{{u.last_name}}, {{u.first_name}}</router-link>\n          </td>\n          <td>{{u.email}}</td>\n\n          <td v-if=\"u.active === 1\">\n            <span class=\"badge bg-success\">Active</span>\n          </td>\n          <td v-else>\n            <span class=\"badge bg-danger\">Inactive</span>\n          </td>\n\n          <td v-if=\"u.token.id > 0\">\n            <a href=\"javascript:void(0);\">\n              <span class=\"badge bg-success\" @click=\"logUserOut(u.id)\">Logged in</span>\n            </a>\n          </td>\n          <td v-else>\n            <span class=\"badge bg-danger\">Not logged in</span>\n          </td>\n        </tr>\n        </tbody>\n      </table>\n\n      <p v-else>Loading...</p>\n\n    </div>\n  </div>\n</template>\n\n<script>\nimport Security from \"@/components/security\";\nimport notie from \"notie/dist/notie\";\nimport {store} from \"@/components/store\";\n\n\n// eslint-disable-next-line\nexport default {\n  name: 'App',\n  data() {\n    return {\n      users: [],\n      ready: false,\n      store,\n    }\n  },\n  beforeMount() {\n    Security.requireToken();\n\n    fetch(process.env.VUE_APP_API_URL + \"/admin/users\", Security.requestOptions(\"\"))\n        .then((response) => response.json())\n        .then((response) => {\n          if (response.error) {\n            this.$emit('error', response.message);\n          } else {\n            this.users = response.data.users;\n            this.ready = true;\n          }\n        })\n        .catch((error) => {\n          this.$emit('error', error);\n        });\n  },\n  methods: {\n    logUserOut(id) {\n      if (id !== store.user.id) {\n        notie.confirm({\n          text: \"Are you sure you want to log this user out?\",\n          submitText: \"Log Out\",\n          submitCallback: function() {\n            console.log(\"Would log out user id\", id);\n          }\n        })\n      } else {\n        this.$emit('error', \"You can't log yourself out!\");\n      }\n    }\n  }\n}\n</script>"],"mappings":"AAkDA,OAAOA,QAAO,MAAO,uBAAuB;AAC5C,OAAOC,KAAI,MAAO,kBAAkB;AACpC,SAAQC,KAAK,QAAO,oBAAoB;;AAGxC;AACA,eAAe;EACbC,IAAI,EAAE,KAAK;EACXC,IAAIA,CAAA,EAAG;IACL,OAAO;MACLC,KAAK,EAAE,EAAE;MACTC,KAAK,EAAE,KAAK;MACZJ;IACF;EACF,CAAC;EACDK,WAAWA,CAAA,EAAG;IACZP,QAAQ,CAACQ,YAAY,CAAC,CAAC;IAEvBC,KAAK,CAACC,OAAO,CAACC,GAAG,CAACC,eAAc,GAAI,cAAc,EAAEZ,QAAQ,CAACa,cAAc,CAAC,EAAE,CAAC,EAC1EC,IAAI,CAAEC,QAAQ,IAAKA,QAAQ,CAACC,IAAI,CAAC,CAAC,EAClCF,IAAI,CAAEC,QAAQ,IAAK;MAClB,IAAIA,QAAQ,CAACE,KAAK,EAAE;QAClB,IAAI,CAACC,KAAK,CAAC,OAAO,EAAEH,QAAQ,CAACI,OAAO,CAAC;MACvC,OAAO;QACL,IAAI,CAACd,KAAI,GAAIU,QAAQ,CAACX,IAAI,CAACC,KAAK;QAChC,IAAI,CAACC,KAAI,GAAI,IAAI;MACnB;IACF,CAAC,EACAc,KAAK,CAAEH,KAAK,IAAK;MAChB,IAAI,CAACC,KAAK,CAAC,OAAO,EAAED,KAAK,CAAC;IAC5B,CAAC,CAAC;EACR,CAAC;EACDI,OAAO,EAAE;IACPC,UAAUA,CAACC,EAAE,EAAE;MACb,IAAIA,EAAC,KAAMrB,KAAK,CAACsB,IAAI,CAACD,EAAE,EAAE;QACxBtB,KAAK,CAACwB,OAAO,CAAC;UACZC,IAAI,EAAE,6CAA6C;UACnDC,UAAU,EAAE,SAAS;UACrBC,cAAc,EAAE,SAAAA,CAAA,EAAW;YACzBC,OAAO,CAACC,GAAG,CAAC,uBAAuB,EAAEP,EAAE,CAAC;UAC1C;QACF,CAAC;MACH,OAAO;QACL,IAAI,CAACL,KAAK,CAAC,OAAO,EAAE,6BAA6B,CAAC;MACpD;IACF;EACF;AACF","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}