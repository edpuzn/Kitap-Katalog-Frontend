{"ast":null,"code":"import { createElementVNode as _createElementVNode, resolveComponent as _resolveComponent, createVNode as _createVNode, withCtx as _withCtx, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\";\nconst _hoisted_1 = {\n  class: \"container\"\n};\nconst _hoisted_2 = {\n  class: \"row\"\n};\nconst _hoisted_3 = {\n  class: \"col\"\n};\nconst _hoisted_4 = /*#__PURE__*/_createElementVNode(\"h1\", {\n  class: \"mt-5\"\n}, \"Login\", -1 /* HOISTED */);\nconst _hoisted_5 = /*#__PURE__*/_createElementVNode(\"hr\", null, null, -1 /* HOISTED */);\nconst _hoisted_6 = /*#__PURE__*/_createElementVNode(\"hr\", null, null, -1 /* HOISTED */);\nconst _hoisted_7 = /*#__PURE__*/_createElementVNode(\"input\", {\n  type: \"submit\",\n  class: \"btn btn-primary\",\n  value: \"Login\"\n}, null, -1 /* HOISTED */);\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_text_input = _resolveComponent(\"text-input\");\n  const _component_form_tag = _resolveComponent(\"form-tag\");\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createElementVNode(\"div\", _hoisted_2, [_createElementVNode(\"div\", _hoisted_3, [_hoisted_4, _hoisted_5, _createVNode(_component_form_tag, {\n    onMyevent: $options.submitHandler,\n    name: \"myform\",\n    event: \"myevent\"\n  }, {\n    default: _withCtx(() => [_createVNode(_component_text_input, {\n      modelValue: $data.email,\n      \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $data.email = $event),\n      label: \"Email\",\n      type: \"email\",\n      name: \"email\",\n      required: \"true\"\n    }, null, 8 /* PROPS */, [\"modelValue\"]), _createVNode(_component_text_input, {\n      modelValue: $data.password,\n      \"onUpdate:modelValue\": _cache[1] || (_cache[1] = $event => $data.password = $event),\n      label: \"Password\",\n      type: \"password\",\n      name: \"password\",\n      required: \"true\"\n    }, null, 8 /* PROPS */, [\"modelValue\"]), _hoisted_6, _hoisted_7]),\n    _: 1 /* STABLE */\n  }, 8 /* PROPS */, [\"onMyevent\"])])])]);\n}","map":{"version":3,"names":["class","_createElementVNode","type","value","_createElementBlock","_hoisted_1","_hoisted_2","_hoisted_3","_hoisted_4","_hoisted_5","_createVNode","_component_form_tag","onMyevent","$options","submitHandler","name","event","default","_withCtx","_component_text_input","modelValue","$data","email","_cache","$event","label","required","password","_hoisted_6","_hoisted_7","_"],"sources":["/Users/ed1p_/MovieProject/frontend/src/components/Login.vue"],"sourcesContent":["<template>\n    <div class=\"container\">\n        <div class=\"row\">\n            <div class=\"col\">\n                <h1 class=\"mt-5\">Login</h1>\n                <hr>\n                <form-tag @myevent=\"submitHandler\" name=\"myform\" event=\"myevent\">\n\n                    <text-input\n                        v-model=\"email\"\n                        label=\"Email\"\n                        type=\"email\"\n                        name=\"email\"\n                        required=\"true\">\n                    </text-input>\n\n                    <text-input\n                        v-model=\"password\"\n                        label=\"Password\"\n                        type=\"password\"\n                        name=\"password\"\n                        required=\"true\">\n                    </text-input>\n\n                    <hr>\n\n                    <input type=\"submit\" class=\"btn btn-primary\" value=\"Login\">\n                </form-tag>\n            </div>\n        </div>\n    </div>\n</template>\n\n<script>\nimport FormTag from './forms/FormTag.vue'\nimport TextInput from './forms/TextInput.vue'\nimport { store } from './store.js'\nimport router from './../router/index.js'\nimport notie from 'notie'\nimport Security from './security.js'\n\nexport default {\n    name: 'login',\n    components: {\n        FormTag,\n        TextInput,\n    },\n    data() {\n        return {\n            email: \"\",\n            password: \"\",\n            store,\n        }\n    },\n    methods: {\n        submitHandler() {\n            const payload = {\n                email: this.email,\n                password: this.password,\n            }\n\n            fetch(process.env.VUE_APP_API_URL + \"/users/login\", Security.requestOptions(payload))\n            .then((response) => response.json())\n            .then((response) => {\n                if (response.error) {\n                    notie.alert({\n                        type: 'error',\n                        text: response.message,\n                        // stay: true,\n                        // position: 'bottom',\n                    })\n                } else {\n                    store.token = response.data.token.token;\n\n                    store.user = {\n                        id: response.data.user.id,\n                        first_name: response.data.user.first_name,\n                        last_name: response.data.user.last_name,\n                        email: response.data.user.email,\n                    }\n\n                    // save info to cookie\n                    let date = new Date();\n                    let expDays = 1;\n                    date.setTime(date.getTime() + (expDays * 24 * 60 * 60 * 1000));\n                    const expires = \"expires=\" + date.toUTCString();\n\n                    // set the cookie\n                    document.cookie = \"_site_data=\"\n                    + JSON.stringify(response.data)\n                    + \"; \"\n                    + expires\n                    + \"; path=/; SameSite=strict; Secure;\"\n                    router.push(\"/\");\n                }\n            })\n        }\n    }\n}\n</script>"],"mappings":";;EACSA,KAAK,EAAC;AAAW;;EACbA,KAAK,EAAC;AAAK;;EACPA,KAAK,EAAC;AAAK;gCACZC,mBAAA,CAA2B;EAAvBD,KAAK,EAAC;AAAM,GAAC,OAAK;gCACtBC,mBAAA,CAAI;gCAmBAA,mBAAA,CAAI;gCAEJA,mBAAA,CAA2D;EAApDC,IAAI,EAAC,QAAQ;EAACF,KAAK,EAAC,iBAAiB;EAACG,KAAK,EAAC;;;;;uBAzBnEC,mBAAA,CA6BM,OA7BNC,UA6BM,GA5BFJ,mBAAA,CA2BM,OA3BNK,UA2BM,GA1BFL,mBAAA,CAyBM,OAzBNM,UAyBM,GAxBFC,UAA2B,EAC3BC,UAAI,EACJC,YAAA,CAqBWC,mBAAA;IArBAC,SAAO,EAAEC,QAAA,CAAAC,aAAa;IAAEC,IAAI,EAAC,QAAQ;IAACC,KAAK,EAAC;;IANvEC,OAAA,EAAAC,QAAA,CAQoB,MAMa,CANbR,YAAA,CAMaS,qBAAA;MAdjCC,UAAA,EASiCC,KAAA,CAAAC,KAAK;MATtC,uBAAAC,MAAA,QAAAA,MAAA,MAAAC,MAAA,IASiCH,KAAA,CAAAC,KAAK,GAAAE,MAAA;MACdC,KAAK,EAAC,OAAO;MACbvB,IAAI,EAAC,OAAO;MACZa,IAAI,EAAC,OAAO;MACZW,QAAQ,EAAC;6CAGbhB,YAAA,CAMaS,qBAAA;MAtBjCC,UAAA,EAiBiCC,KAAA,CAAAM,QAAQ;MAjBzC,uBAAAJ,MAAA,QAAAA,MAAA,MAAAC,MAAA,IAiBiCH,KAAA,CAAAM,QAAQ,GAAAH,MAAA;MACjBC,KAAK,EAAC,UAAU;MAChBvB,IAAI,EAAC,UAAU;MACfa,IAAI,EAAC,UAAU;MACfW,QAAQ,EAAC;6CAGbE,UAAI,EAEJC,UAA2D,C;IA1B/EC,CAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}