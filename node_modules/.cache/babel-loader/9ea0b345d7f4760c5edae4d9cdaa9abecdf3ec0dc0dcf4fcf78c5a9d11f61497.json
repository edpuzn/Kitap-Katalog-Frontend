{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\n// eslint-disable-next-line\nimport { store } from './store.js';\nimport router from \"@/router\";\nimport security from \"@/components/security\";\nexport default {\n  name: 'App',\n  data() {\n    return {\n      store\n    };\n  },\n  methods: {\n    logout() {\n      const payload = {\n        token: store.token\n      };\n      const requestOptions = {\n        method: \"POST\",\n        body: JSON.stringify(payload)\n      };\n      fetch(process.env.VUE_APP_API_URL + \"/users/logout\", requestOptions).then(response => response.json()).then(response => {\n        if (response.error) {\n          console.log(response.message);\n        } else {\n          store.token = \"\";\n          store.user = {};\n          document.cookie = ' _site_data=; Path=/; ' + 'SameSite=Strict; Secure; ' + 'Expires=Thu, 01 Jan 1970 00:00:01 GMT;';\n          router.push(\"/login\");\n        }\n      });\n    }\n  }\n};","map":{"version":3,"names":["store","router","security","name","data","methods","logout","payload","token","requestOptions","method","body","JSON","stringify","fetch","process","env","VUE_APP_API_URL","then","response","json","error","console","log","message","user","document","cookie","push"],"sources":["/Users/ed1p_/MovieProject/frontend/src/components/Header.vue"],"sourcesContent":["<template>\n  <nav class=\"navbar navbar-expand-lg navbar-dark bg-dark\">\n    <div class=\"container-fluid\">\n      <a class=\"navbar-brand\" href=\"#\">Navbar</a>\n      <button class=\"navbar-toggler\" type=\"button\" data-bs-toggle=\"collapse\" data-bs-target=\"#navbarNav\" aria-controls=\"navbarNav\" aria-expanded=\"false\" aria-label=\"Toggle navigation\">\n        <span class=\"navbar-toggler-icon\"></span>\n      </button>\n      <div class=\"collapse navbar-collapse\" id=\"navbarNav\">\n        <ul class=\"navbar-nav me-auto mb-2 mb-lg-0\">\n          <li class=\"nav-item\">\n            <router-link class=\"nav-link active\" aria-current=\"page\" to=\"/\">Home</router-link>\n          </li>\n\n          <li class=\"nav-item\">\n            <router-link class=\"nav-link active\" to=\"/books\">Books</router-link>\n          </li>\n\n          <li v-if=\"store.token !== ''\" class=\"nav-item dropdown\">\n            <a class=\"nav-link dropdown-toggle\" href=\"#\" id=\"navBarDropDown\" role=\"button\" data-bs-toggle=\"dropdown\"\n               aria-expanded=\"false\">\n              Admin\n            </a>\n            <ul class=\"dropdown-menu\" aria-labelledby=\"navBarDropDown\">\n              <li>\n                <router-link class=\"dropdown-item\" to=\"/admin/users\">Manage Users</router-link>\n              </li>\n              <li>\n                <router-link class=\"dropdown-item\" to=\"/admin/users/0\">Add User</router-link>\n              </li>\n              <li>\n                <router-link class=\"dropdown-item\" to=\"/admin/books\">Manage Books</router-link>\n              </li>\n              <li>\n                <router-link class=\"dropdown-item\" :to=\"{name:'BookEdit', params: {bookId: 0}}\">Add Book</router-link>\n              </li>\n            </ul>\n\n          </li>\n\n          <li class=\"nav-item\">\n            <router-link v-if=\"store.token == ''\" class=\"nav-link\" to=\"/login\">Login</router-link>\n            <a href=\"javascript:void(0);\" v-else class=\"nav-link\" @click=\"logout\">Logout</a>\n          </li>\n        </ul>\n\n        <span class=\"navbar-text\">\n          {{ store.user.first_name ?? ''}}\n      </span>\n\n      </div>\n    </div>\n  </nav>\n</template>\n\n\n<script>\n// eslint-disable-next-line\nimport { store } from './store.js'\nimport router from \"@/router\";\nimport security from \"@/components/security\";\n\nexport default {\n  name: 'App',\n  data() {\n    return {\n      store\n    }\n  },\n  methods: {\n    logout() {\n      const payload = {\n        token: store.token,\n      }\n\n      const requestOptions = {\n        method: \"POST\",\n        body: JSON.stringify(payload),\n      }\n\n      fetch(process.env.VUE_APP_API_URL+\"/users/logout\", requestOptions)\n          .then((response) => response.json())\n          .then((response) => {\n            if (response.error) {\n              console.log(response.message);\n            } else {\n              store.token = \"\";\n              store.user= {};\n\n              document.cookie = ' _site_data=; Path=/; ' +\n                  'SameSite=Strict; Secure; ' +\n                  'Expires=Thu, 01 Jan 1970 00:00:01 GMT;'\n              router.push(\"/login\");\n            }\n          })\n\n    }\n  }\n}\n</script>"],"mappings":";AAwDA;AACA,SAASA,KAAI,QAAS,YAAW;AACjC,OAAOC,MAAK,MAAO,UAAU;AAC7B,OAAOC,QAAO,MAAO,uBAAuB;AAE5C,eAAe;EACbC,IAAI,EAAE,KAAK;EACXC,IAAIA,CAAA,EAAG;IACL,OAAO;MACLJ;IACF;EACF,CAAC;EACDK,OAAO,EAAE;IACPC,MAAMA,CAAA,EAAG;MACP,MAAMC,OAAM,GAAI;QACdC,KAAK,EAAER,KAAK,CAACQ;MACf;MAEA,MAAMC,cAAa,GAAI;QACrBC,MAAM,EAAE,MAAM;QACdC,IAAI,EAAEC,IAAI,CAACC,SAAS,CAACN,OAAO;MAC9B;MAEAO,KAAK,CAACC,OAAO,CAACC,GAAG,CAACC,eAAe,GAAC,eAAe,EAAER,cAAc,EAC5DS,IAAI,CAAEC,QAAQ,IAAKA,QAAQ,CAACC,IAAI,CAAC,CAAC,EAClCF,IAAI,CAAEC,QAAQ,IAAK;QAClB,IAAIA,QAAQ,CAACE,KAAK,EAAE;UAClBC,OAAO,CAACC,GAAG,CAACJ,QAAQ,CAACK,OAAO,CAAC;QAC/B,OAAO;UACLxB,KAAK,CAACQ,KAAI,GAAI,EAAE;UAChBR,KAAK,CAACyB,IAAI,GAAE,CAAC,CAAC;UAEdC,QAAQ,CAACC,MAAK,GAAI,wBAAuB,GACrC,2BAA0B,GAC1B,wCAAuC;UAC3C1B,MAAM,CAAC2B,IAAI,CAAC,QAAQ,CAAC;QACvB;MACF,CAAC;IAEP;EACF;AACF","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}