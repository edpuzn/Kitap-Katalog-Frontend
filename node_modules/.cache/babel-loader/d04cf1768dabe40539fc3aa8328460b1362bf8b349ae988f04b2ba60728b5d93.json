{"ast":null,"code":"// eslint-disable-next-line\nimport Security from \"@/components/security\";\nimport { store } from \"@/components/store\";\nimport TextInput from \"@/components/forms/TextInput.vue\";\nimport FormTag from \"@/components/forms/FormTag.vue\";\nexport default {\n  beforeMount() {\n    Security.requireToken();\n    if (parseInt(String(this.$route.params.userId), 10) > 0) {\n      // editing an existing user\n      // TODO - get user from database\n    }\n  },\n  data() {\n    return {\n      user: {\n        id: 0,\n        first_name: \"\",\n        last_name: \"\",\n        email: \"\",\n        password: \"\"\n      },\n      store\n    };\n  },\n  components: {\n    'form-tag': FormTag,\n    'text-input': TextInput\n  },\n  methods: {\n    submitHandler() {\n      const payload = {\n        id: parseInt(String(this.$route.params.userId), 10),\n        first_name: this.user.first_name,\n        last_name: this.user.last_name,\n        email: this.user.email,\n        password: this.user.password\n      };\n      fetch(`${process.env.VUE_APP_API_URL}/admin/users/save`, Security.requestOptions(payload)).then(response => response.json()).then(data => {\n        if (data.error) {\n          notie.alert({\n            type: 'error',\n            text: data.message\n          });\n        } else {\n          notie.alert({\n            type: 'success',\n            text: 'Changes saved!'\n          });\n        }\n      }).catch(error => {\n        notie.alert({\n          type: 'error',\n          text: error\n        });\n      });\n    },\n    confirmDelete() {}\n  }\n};","map":{"version":3,"names":["Security","store","TextInput","FormTag","beforeMount","requireToken","parseInt","String","$route","params","userId","data","user","id","first_name","last_name","email","password","components","methods","submitHandler","payload","fetch","process","env","VUE_APP_API_URL","requestOptions","then","response","json","error","notie","alert","type","text","message","catch","confirmDelete"],"sources":["/Users/ed1p_/MovieProject/frontend/src/components/UserEdit.vue"],"sourcesContent":["<template>\n  <div class=\"container\">\n    <div class=\"row\">\n      <div class=\"col\">\n        <h1 class=\"mt-3\">User</h1>\n        <hr>\n        <form-tag @userEditEvent=\"submitHandler\" name=\"userform\" event=\"userEditEvent\">\n\n          <text-input\n              v-model=\"user.first_name\"\n              type=\"text\"\n              required=\"true\"\n              label=\"First Name\"\n              :value=\"user.first_name\"\n              name=\"first-name\"></text-input>\n\n          <text-input\n              v-model=\"user.last_name\"\n              type=\"text\"\n              required=\"true\"\n              label=\"Last Name\"\n              :value=\"user.last_name\"\n              name=\"last-name\"></text-input>\n\n          <text-input\n              v-model=\"user.email\"\n              type=\"email\"\n              required=\"true\"\n              label=\"Email\"\n              :value=\"user.email\"\n              name=\"email\"></text-input>\n\n          <text-input\n              v-if=\"this.user.id === 0\"\n              v-model=\"user.password\"\n              type=\"password\"\n              required=\"true\"\n              label=\"Password\"\n              :value=\"user.password\"\n              name=\"password\"></text-input>\n\n          <text-input\n              v-else\n              v-model=\"user.password\"\n              type=\"password\"\n              label=\"Password\"\n              :value=\"user.password\"\n              name=\"password\"></text-input>\n\n          <hr>\n          <div class=\"float-start\">\n            <input type=\"submit\" class=\"btn btn-primary me-2\" value=\"Save\">\n            <router-link to=\"/admin/users\" class=\"btn btn-outline-secondary\">Cancel</router-link>\n          </div>\n          <div class=\"float-end\">\n            <a v-if=\"(this.$route.params.userId > 0) && (parseInt(String(this.$route.params.userId), 10) !== store.user.id)\"\n               class=\"btn btn-danger\" href=\"javascript:void(0);\" @click=\"confirmDelete(this.user.id)\">Delete</a>\n          </div>\n          <div class=\"clearfix\"></div>\n\n        </form-tag>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\n// eslint-disable-next-line\nimport Security from \"@/components/security\";\nimport {store} from \"@/components/store\";\nimport TextInput from \"@/components/forms/TextInput.vue\";\nimport FormTag from \"@/components/forms/FormTag.vue\";\n\nexport default {\n  beforeMount() {\n    Security.requireToken();\n\n    if (parseInt(String(this.$route.params.userId), 10) > 0) {\n      // editing an existing user\n      // TODO - get user from database\n    }\n  },\n  data() {\n    return {\n      user: {\n        id: 0,\n        first_name: \"\",\n        last_name: \"\",\n        email: \"\",\n        password: \"\",\n      },\n      store,\n    }\n  },\n  components: {\n    'form-tag': FormTag,\n    'text-input': TextInput,\n  },\n  methods: {\n    submitHandler() {\n      const payload = {\n        id: parseInt(String(this.$route.params.userId), 10),\n        first_name: this.user.first_name,\n        last_name: this.user.last_name,\n        email: this.user.email,\n        password: this.user.password,\n      }\n\n      fetch(`${process.env.VUE_APP_API_URL}/admin/users/save`, Security.requestOptions(payload))\n          .then((response) => response.json())\n          .then((data) => {\n            if (data.error) {\n              notie.alert({\n                type: 'error',\n                text: data.message,\n              })\n            } else {\n              notie.alert({\n                type: 'success',\n                text: 'Changes saved!',\n              })\n            }\n          })\n          .catch((error) => {\n            notie.alert({\n              type: 'error',\n              text: error,\n            })\n          })\n    },\n    confirmDelete() {\n\n    }\n  }\n}\n</script>"],"mappings":"AAmEA;AACA,OAAOA,QAAO,MAAO,uBAAuB;AAC5C,SAAQC,KAAK,QAAO,oBAAoB;AACxC,OAAOC,SAAQ,MAAO,kCAAkC;AACxD,OAAOC,OAAM,MAAO,gCAAgC;AAEpD,eAAe;EACbC,WAAWA,CAAA,EAAG;IACZJ,QAAQ,CAACK,YAAY,CAAC,CAAC;IAEvB,IAAIC,QAAQ,CAACC,MAAM,CAAC,IAAI,CAACC,MAAM,CAACC,MAAM,CAACC,MAAM,CAAC,EAAE,EAAE,IAAI,CAAC,EAAE;MACvD;MACA;IAAA;EAEJ,CAAC;EACDC,IAAIA,CAAA,EAAG;IACL,OAAO;MACLC,IAAI,EAAE;QACJC,EAAE,EAAE,CAAC;QACLC,UAAU,EAAE,EAAE;QACdC,SAAS,EAAE,EAAE;QACbC,KAAK,EAAE,EAAE;QACTC,QAAQ,EAAE;MACZ,CAAC;MACDhB;IACF;EACF,CAAC;EACDiB,UAAU,EAAE;IACV,UAAU,EAAEf,OAAO;IACnB,YAAY,EAAED;EAChB,CAAC;EACDiB,OAAO,EAAE;IACPC,aAAaA,CAAA,EAAG;MACd,MAAMC,OAAM,GAAI;QACdR,EAAE,EAAEP,QAAQ,CAACC,MAAM,CAAC,IAAI,CAACC,MAAM,CAACC,MAAM,CAACC,MAAM,CAAC,EAAE,EAAE,CAAC;QACnDI,UAAU,EAAE,IAAI,CAACF,IAAI,CAACE,UAAU;QAChCC,SAAS,EAAE,IAAI,CAACH,IAAI,CAACG,SAAS;QAC9BC,KAAK,EAAE,IAAI,CAACJ,IAAI,CAACI,KAAK;QACtBC,QAAQ,EAAE,IAAI,CAACL,IAAI,CAACK;MACtB;MAEAK,KAAK,CAAE,GAAEC,OAAO,CAACC,GAAG,CAACC,eAAgB,mBAAkB,EAAEzB,QAAQ,CAAC0B,cAAc,CAACL,OAAO,CAAC,EACpFM,IAAI,CAAEC,QAAQ,IAAKA,QAAQ,CAACC,IAAI,CAAC,CAAC,EAClCF,IAAI,CAAEhB,IAAI,IAAK;QACd,IAAIA,IAAI,CAACmB,KAAK,EAAE;UACdC,KAAK,CAACC,KAAK,CAAC;YACVC,IAAI,EAAE,OAAO;YACbC,IAAI,EAAEvB,IAAI,CAACwB;UACb,CAAC;QACH,OAAO;UACLJ,KAAK,CAACC,KAAK,CAAC;YACVC,IAAI,EAAE,SAAS;YACfC,IAAI,EAAE;UACR,CAAC;QACH;MACF,CAAC,EACAE,KAAK,CAAEN,KAAK,IAAK;QAChBC,KAAK,CAACC,KAAK,CAAC;UACVC,IAAI,EAAE,OAAO;UACbC,IAAI,EAAEJ;QACR,CAAC;MACH,CAAC;IACP,CAAC;IACDO,aAAaA,CAAA,EAAG,CAEhB;EACF;AACF","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}