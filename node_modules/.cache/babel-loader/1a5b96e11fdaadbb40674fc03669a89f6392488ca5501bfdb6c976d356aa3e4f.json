{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { store } from './store.js';\nimport router from './../router/index.js';\nimport Security from './security';\nexport default {\n  data() {\n    return {\n      store\n    };\n  },\n  methods: {\n    logout() {\n      const payload = {\n        token: store.token\n      };\n      fetch(process.env.VUE_APP_API_URL + \"/users/logout\", Security.requestOptions(payload)).then(response => response.json()).then(response => {\n        if (response.error) {\n          console.log(response.message);\n        } else {\n          store.token = \"\";\n          store.user = {};\n          document.cookie = '_site_data=; Path=/; ' + 'SameSite=Strict; Secure; ' + 'Expires=Thu, 01 Jan 1970 00:00:01 GMT;';\n          router.push(\"/login\");\n        }\n      });\n    }\n  }\n};","map":{"version":3,"names":["store","router","Security","data","methods","logout","payload","token","fetch","process","env","VUE_APP_API_URL","requestOptions","then","response","json","error","console","log","message","user","document","cookie","push"],"sources":["/Users/ed1p_/MovieProject/frontend/src/components/Header.vue"],"sourcesContent":["<template>\n    <nav class=\"navbar navbar-expand-lg navbar-dark bg-dark\">\n  <div class=\"container-fluid\">\n    <a class=\"navbar-brand\" href=\"#\">Navbar</a>\n    <button class=\"navbar-toggler\" type=\"button\" data-bs-toggle=\"collapse\" data-bs-target=\"#navbarNav\" aria-controls=\"navbarNav\" aria-expanded=\"false\" aria-label=\"Toggle navigation\">\n      <span class=\"navbar-toggler-icon\"></span>\n    </button>\n    <div class=\"collapse navbar-collapse\" id=\"navbarNav\">\n      <ul class=\"navbar-nav me-auto mb-2 mb-lg-0\">\n        <li class=\"nav-item\">\n          <router-link class=\"nav-link active\" aria-current=\"page\" to=\"/\">Home</router-link>\n        </li>\n\n        <li class=\"nav-item\">\n          <router-link class=\"nav-link active\" to=\"/books\">Books</router-link>\n        </li>\n\n        <li v-if=\"store.token !== ''\" class=\"nav-item dropdown\">\n            <a class=\"nav-link dropdown-toggle\" href=\"#\" id=\"navBarDropDown\" role=\"button\" data-bs-toggle=\"dropdown\"\n              aria-expanded=\"false\">\n              Admin\n            </a>\n            <ul class=\"dropdown-menu\" aria-labelledby=\"navBarDropDown\">\n              <li>\n                <router-link class=\"dropdown-item\" to=\"/admin/users\">Manage Users</router-link>\n              </li>\n              <li>\n                <router-link class=\"dropdown-item\" to=\"/admin/users/0\">Add User</router-link>\n              </li>\n              <li>\n                <router-link class=\"dropdown-item\" to=\"/admin/books\">Manage Books</router-link>\n              </li>\n              <li>\n                <router-link class=\"dropdown-item\" :to=\"{name:'BookEdit', params: {bookId: 0}}\">Add Book</router-link>\n              </li>\n            </ul>\n\n        </li>\n\n        <li class=\"nav-item\">\n          <router-link v-if=\"store.token == ''\" class=\"nav-link\" to=\"/login\">Login</router-link>\n          <a href=\"javascript:void(0);\" v-else class=\"nav-link\" @click=\"logout\">Logout</a>\n        </li>\n      </ul>\n\n      <span class=\"navbar-text\">\n          {{ store.user.first_name ?? ''}}\n      </span>\n\n    </div>\n  </div>\n</nav>\n</template>\n\n<script>\nimport { store } from './store.js'\nimport router from './../router/index.js'\nimport Security from './security'\n\nexport default {\n  data() {\n    return {\n      store\n    }\n  },\n  methods: {\n    logout() {\n      const payload = {\n        token: store.token,\n      }\n\n      fetch(process.env.VUE_APP_API_URL + \"/users/logout\", Security.requestOptions(payload))\n      .then((response) => response.json())\n      .then((response) => {\n        if (response.error) {\n          console.log(response.message);\n        } else {\n          store.token = \"\";\n          store.user = {};\n\n          document.cookie = '_site_data=; Path=/; ' +\n          'SameSite=Strict; Secure; ' +\n          'Expires=Thu, 01 Jan 1970 00:00:01 GMT;'\n\n          router.push(\"/login\");\n        }\n      })\n      \n    }\n  }\n}\n</script>\n"],"mappings":";AAuDA,SAASA,KAAI,QAAS,YAAW;AACjC,OAAOC,MAAK,MAAO,sBAAqB;AACxC,OAAOC,QAAO,MAAO,YAAW;AAEhC,eAAe;EACbC,IAAIA,CAAA,EAAG;IACL,OAAO;MACLH;IACF;EACF,CAAC;EACDI,OAAO,EAAE;IACPC,MAAMA,CAAA,EAAG;MACP,MAAMC,OAAM,GAAI;QACdC,KAAK,EAAEP,KAAK,CAACO;MACf;MAEAC,KAAK,CAACC,OAAO,CAACC,GAAG,CAACC,eAAc,GAAI,eAAe,EAAET,QAAQ,CAACU,cAAc,CAACN,OAAO,CAAC,EACpFO,IAAI,CAAEC,QAAQ,IAAKA,QAAQ,CAACC,IAAI,CAAC,CAAC,EAClCF,IAAI,CAAEC,QAAQ,IAAK;QAClB,IAAIA,QAAQ,CAACE,KAAK,EAAE;UAClBC,OAAO,CAACC,GAAG,CAACJ,QAAQ,CAACK,OAAO,CAAC;QAC/B,OAAO;UACLnB,KAAK,CAACO,KAAI,GAAI,EAAE;UAChBP,KAAK,CAACoB,IAAG,GAAI,CAAC,CAAC;UAEfC,QAAQ,CAACC,MAAK,GAAI,uBAAsB,GACxC,2BAA0B,GAC1B,wCAAuC;UAEvCrB,MAAM,CAACsB,IAAI,CAAC,QAAQ,CAAC;QACvB;MACF,CAAC;IAEH;EACF;AACF","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}